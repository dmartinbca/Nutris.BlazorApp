 
@using Nutris.BlazorApp.Components.Orders.Steps
@using NutrisBlazor.Models
@using NutrisBlazor.Services
@using System.Text.Json
@inherits OrdersComponentBase
@inject ILocalizationService Localization
@inject IJSRuntime JSRuntime
@inject ILocalStorageService LocalStorage
@if (IsLoading)
{
    <div class="loading-overlay">
        <div class="spinner"></div>
    </div>
}

<!-- HEADER -->
<!-- Language Selector -->
<div class="language-selector-products">
    <button class="language-button" type="button" @onclick="@ToggleLanguageMenu">
        @if (currentLanguage == "es")
        {
            <span>Español</span>
        }
        else
        {
            <span>English</span>
        }
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
        </svg>
    </button>

    @if (showLanguageMenu)
    {
        <div class="language-dropdown">
            <button class="dropdown-item" type="button" @onclick="@(() => SelectLanguage("en"))">
                English
            </button>
            <button class="dropdown-item" type="button" @onclick="@(() => SelectLanguage("es"))">
                Español
            </button>
        </div>
    }
</div>

<!-- Back Button -->
<div class="back-button-container">
    <button class="back-button" @onclick="@GoBack">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="32" cy="32" r="32" fill="#2F5496" />
            <path d="M47 32.126H18.608M25.7061 23L17.297 31.409C16.901 31.805 16.901 32.447 17.297 32.843L25.7061 41.252"
                  stroke="white" stroke-width="2.3" stroke-linecap="round" />
        </svg>
    </button>
</div>
<div>
    <section>
        <div class="header-order">
            <div class="hcol1">
                <div class="row1-1 row">
                    <div class="col1-rh1 col-6">
                         
                            <img alt="logo" style="width:84px;" src="@Logo">
                        
                    </div>
                    <div class="country-rh1 col-6">
                        <p class="RalewayRegular font-18">@Localization["orderView.Country"]</p>
                        <div class="d-flex gap-3 justify-content-end align-content-center">
                            @if (!string.IsNullOrEmpty(Country1))
                            {
                                <div class="col2-rh1 d-flex justify-content-end">
                                    <img src="@CountryFlag1" alt="@Country1" />
                                    <p>@Country1</p>
                                </div>
                            }
                            @if (!string.IsNullOrEmpty(Country2) && Country2 != "-")
                            {
                                <div class="col2-rh1 d-flex justify-content-end">
                                    <img src="@CountryFlag2" alt="@Country2" />
                                    <p>@Country2</p>
                                </div>
                            }
                            @if (!string.IsNullOrEmpty(Country3) && Country3 != "-")
                            {
                                <div class="col2-rh1 d-flex justify-content-end">
                                    <img src="@CountryFlag3" alt="@Country3" />
                                    <p>@Country3</p>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <div class="row2-1">
                    <div class="col1-rh2 d-flex">
                        <p class="RalewayBold font-21-23"></p>
                        <span><p class="RalewayRegular font-21-23">@Code</p></span>
                    </div>
                </div>

                <div class="row3-1 row">
                    <div class="col2-rh3 col-6">
                        <p class="RalewayBold font-21-23">@Name</p>
                        <p class="RalewayLight font-21-23">@ProductName2</p>
                    </div>
                    <div class="col3-rh3 col-6">
                        <span class="MulishBold font-21-23"><p>MOQ @MOQ units</p></span>
                        <span><p class="MulishLight font-21-23">@UnitPrice €/ unit</p></span>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="steps-row">
                        <StepActiveOne Background="@GetStepColor(1)" Color="@GetStepTextColor(1)" />
                        <StepActiveNew Background="@GetStepColor(5)" Color="@GetStepTextColor(5)" />
                        <StepActiveTwo Background="@GetStepColor(2)" Color="@GetStepTextColor(2)" />
                        <StepActiveThree Background="@GetStepColor(3)" Color="@GetStepTextColor(3)" />
                        <StepActiveFour Background="@GetStepColor(4)" Color="@GetStepTextColor(4)" />
                    </div>
                </div>
            </div>

            <!-- col2 -->
            <div class="hcol2">
                @if (Status == "Cerrado Cliente" || Status == "Cerrado cliente y calidad")
                {
                    <div class="rowh1-2 row">
                        <div class="colh1-r1 col-4">
                            <p class="RalewayBold font-16">
                                @Localization["orderView.NutrisCode1"]<br />
                                @Localization["orderView.NutrisCode2"]
                            </p>
                        </div>
                        <div class="colh2-r1 col-8 d-flex">
                            <p class="font-28">@NutrisCode</p>
                        </div>
                    </div>
                }

                <div class="rowh3-2 row">
                    <div class="colh2-r3 col-12 d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center justify-content-start">
                            <p class="font-16 RalewayRegular">@Localization["orderView.Estimated"]</p>
                            <div data-bs-toggle="tooltip" data-bs-placement="top" title="@Localization["orderView.EstimatedTooltip"]">
                                <svg xmlns="http://www.w3.org/2000/svg" style="width:24px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                                </svg>
                            </div>
                        </div>
                        <p class="MuseoSemiBold font-18">@EstimatedDateString</p>
                    </div>

                    <div class="colh3-r3 col-12 d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center justify-content-start">
                            <p class="font-16 RalewayRegular">@Localization["orderView.Calculated"]</p>
                            <div data-bs-toggle="tooltip" data-bs-placement="top" title="@Localization["orderView.CalculatedTooltip"]">
                                <svg xmlns="http://www.w3.org/2000/svg" style="width:24px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                                </svg>
                            </div>
                        </div>
                        <p class="MuseoSemiBold redDate font-18">@DeadlineDateString</p>
                    </div>
                </div>

      @*           @if (ReportFiles.Any())
                { *@
                    <div class="rowh4-2">
                        <div class="colh1-r4">
                            <button class="font-20 RalewayRegular" @onclick="ToggleDownloadReports">
                                @Localization["orderView.DownloadReports"]
                                <img class="arrow-download @(ShowReports ? "arrow-t-r" : "")" src="/iconbuttons/download-arrow.svg" alt="download">
                            </button>

                            @if (ShowReports)
                            {
                                <div id="container-toggle-h" class="download-t active">
                                    <ul class="RalewaySemiBold font-20">
                                        @foreach (var f in ReportFiles)
                                        {
                                            <li>
                                                <a class="a" style="cursor:pointer" @onclick="() => DownloadBase64File(f.File, f.Name)">@f.Name</a>
                                            </li>
                                        }
                                    </ul>
                                </div>
                            }
                        </div>
                    </div>
               @*  } *@
            </div>
        </div>
    </section>

    <!-- SECTION BODY -->
    <section>
        <div class="col-b">
            <div class="row-b">

                <!-- 1. FORMULATION -->
                <div class="toggle-from">
                    <div class="flex-elm-from row">
                        <div class="left-from col-8 d-flex">
                            <h2 class="RalewayBold font-24">@Localization["orderView.Formulation"]</h2>
                        </div>
                        <div class="right-from col-4 d-flex gap-1">
                            <div class="line-from"></div>
                            <div class="@(PercentFilledFormulation == 0 ? "progress-bar-from-0" : "progress-bar-from")">
                                <p class="font-19 MuseoSemiBold">@FormatPercent(PercentFilledFormulation)%</p>
                            </div>
                            <img @onclick="() => ToggleSection(1)" id="id-0" 
                                 class="arrow-t @(IsOpen[1] ? "arrow-t-r" : "")" 
                                 src="/img/arrow-close-down.svg" alt="arrow open">
                        </div>
                    </div>

                    @if (IsOpen[1])
                    {
                        <div id="container-toggle-1" class="container-toggle active">
                            <div class="content-toggle-header">
                                <div class="features-row">
                                    @for (int i = 0; i < 4; i++)
                                    {
                                        var idx = i;
                                        <div class="feature">
                                            <div class="img-icon-tags">
                                                <img class="w-79 h-79" alt="tag" src="@GetFeatureImage(idx)">
                                            </div>
                                            <div class="paragraph-img-tags">
                                                <p class="font-12 RalewayRegular">@GetFeatureTitle(idx)</p>
                                            </div>
                                            <div class="content-switch">
                                                <label class="switch">
                                                    <input type="checkbox" class="check-all" checked="@GetSwitchValue(idx)" disabled />
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>

                            <div class="content-t content-t-pdb">
                                <div class="mb-4">
                                    <p class="font-16">@Localization["Selectingtheseoptions"]</p>
                                </div>
                                <div class="head-t">
                                    <h3 class="font-18 RalewayBold">@Localization["orderView.GUMMYDNA"]</h3>
                                </div>

                                <div class="body-t">
                                    <!-- Base, Sugar, Cover -->
                                    @foreach (var item in GummyListBn)
                                    {
                                        <div class="body-td">
                                            <p class="font-18 RalewayRegular">@item.Label</p>
                                            <div class="data-t">
                                                <input class="font-20 RalewayRegular" type="text" readonly value="@item.Value">
                                                <div class="line-from"></div>
                                                @if (item.Value != "-")
                                                {
                                                    <img src="/img/check-icon.svg" alt="check">
                                                }
                                            </div>
                                        </div>
                                    }

                                    <!-- Color, Flavour, Size, Serving -->
                                    @foreach (var item in GummyListB)
                                    {
                                        <div class="body-td">
                                            <p class="font-18 RalewayRegular">@item.Label</p>
                                            <div class="data-t">
                                                <input class="font-20 RalewayRegular" type="text" readonly value="@item.Value">
                                                <div class="line-from"></div>
                                                @if (item.Value != "-")
                                                {
                                                    <img src="/img/check-icon.svg" alt="check">
                                                }
                                            </div>
                                        </div>
                                    }

                                    <!-- Shape -->
                                    <div class="body-td" id="body-td-gommy">
                                        <p class="font-18 RalewayRegular">@Localization["orderView.Shape"]</p>
                                        <div class="data-t">
                                            <div class="flex-gomi">
                                                @if (!string.IsNullOrEmpty(GummyShapeImg))
                                                {
                                                    <div class="gomi-img">
                                                        <img alt="gummy" src="@GummyShapeImg">
                                                    </div>
                                                }
                                                <div class="gomi-content" id="important-gomi">
                                                    <h3 class="font-20 MulishBold">@Shape</h3>
                                                    <span><p class="font-16 RalewayRegular">@Localization["orderView.TextInfoGummy"]</p></span>
                                                </div>
                                            </div>
                                            <div class="line-from" id="line-from-gommy"></div>
                                            @if (!string.IsNullOrEmpty(GummyShapeImg))
                                            {
                                                <img src="/img/check-icon.svg" alt="check">
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- The Recipe -->
                            <div class="content-t content-t-pdb">
                                <div class="head-t mb-3">
                                    <h3 class="font-18 RalewayBold">@Localization["orderView.TheRecipe"]</h3>
                                </div>
                                <div class="body-t-flex header-row">
                                    <div class="body-data"><p class="RalewayBold font-14">@Localization["orderView.Active"]</p></div>
                                    <div class="body-data"><p class="RalewayBold font-14">@Localization["orderView.SourceUsed"]</p></div>
                                    <div class="body-data"><p class="RalewayBold font-14">@Localization["orderView.QuantityServing"]</p></div>
                                    <div class="body-data"><p class="RalewayBold font-14">% EU RDA</p></div>
                                </div>

                                @foreach (var r in RecipeRows)
                                {
                                    <div class="d-flex gap-lg-4 data-row">
                                        <div class="body-data pb-lg-4">
                                            <input type="text" readonly class="font-14 w-100" value="@r.Active">
                                        </div>
                                        <div class="body-data">
                                            <input type="text" readonly class="font-14" value="@r.SourceUsed">
                                        </div>
                                        <div class="body-data">
                                            <input type="text" readonly class="font-14" value="@r.QuantityServing">
                                        </div>
                                        <div class="body-data">
                                            <input type="text" readonly class="font-14" value="@r.RdaEu">
                                        </div>
                                    </div>
                                }
                            </div>

                            <!-- Nutris Comments -->
                            <div class="content-t content-t-pdb">
                                <div class="head-t">
                                    <h3 class="font-18 RalewayBold">@Localization["orderView.NutrisComments"]</h3>
                                </div>
                                <div class="comments-area">
                                    <textarea class="font-16 RalewayRegular" readonly rows="10">@NutrisComments</textarea>
                                </div>
                            </div>

                            <!-- Test -->
                            <div class="content-t content-t-pdb">
                                <div class="content-td">
                                    <h3 class="font-18 RalewayBold">@Localization["orderView.DoYouNeedATest"]</h3>
                                    <p class="font-16 RalewayRegular">@Localization["orderView.TextAccept"]</p>
                                    <div class="content-td-flex check-from-label">
                                        <input type="checkbox"
                                               style="cursor:pointer"
                                               @bind="TakeSample"
                                               @bind:after="OnTakeSampleChanged"
                                               disabled="@(CustomerAccepted || Status == "Cerrado cliente y calidad")" />
                                        <p>
                                            <span class="RalewayBold font-18">@Localization["orderView.TakeSampleInLaboratory"]</span>
                                            <span class="font-18 fontWeight300">(€ @TakeSamplePrice)</span>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="btn-atr">
                                @if (CustomerAccepted)
                                {
                                    <div class="btn-save-atr">
                                        <button class="btn-save-atr font-20 RalewayRegular">@Localization["Approved"]</button>
                                    </div>
                                }
                                else
                                {
                                    <div>
                                        <button data-bs-toggle="modal" data-bs-target="#approveModal" class="btn-save-atr font-20 RalewayRegular">
                                            @Localization["orderView.ApproveTheRecipe"]
                                        </button>
                                        <div class="paragraph-customize d-flex justify-content-end">
                                            <p class="font-16 RalewayRegular width384">@Localization["orderView.TextInformative"]</p>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    }
                </div>

                @if (CustomerAccepted && Prefix == "RG35")
                {
                    <!-- 2. PACKAGING / ENVASADO -->
                    @if (ProductType == "Bote")
                    {
                        <div class="toggle-from m-top-toggle">
                            <div class="flex-elm-from row">
                                <div class="left-from col-8 d-flex">
                                    <h2 class="RalewayBold font-24">Packaging/Envasado</h2>
                                </div>
                                <div class="right-from col-4 d-flex gap-1">
                                    <div class="line-from"></div>
                                    <div class="@(PercentFilledBottle == 0 ? "progress-bar-from-0" : "progress-bar-from")">
                                        <p class="font-19 MuseoSemiBold">@FormatPercent(PercentFilledBottle)%</p>
                                    </div>
                                    <img @onclick="() => ToggleSection(2)" id="id-1" 
                                         class="arrow-t @(IsOpen[2] ? "arrow-t-r" : "")" 
                                         src="/img/arrow-close-down.svg" alt="arrow open">
                                </div>
                            </div>

                            @if (IsOpen[2])
                            {
                                <div id="container-toggle-2" class="container-toggle active">
                                    <div class="content-t content-t-pdb">
                                        <div class="body-t">
                                            <div class="body-td">
                                                <div class="d-flex gap-1">
                                                    <p class="font-18 RalewayRegular">@Localization["orderView.TraddeName"]</p>
                                                    <div data-bs-toggle="tooltip" data-bs-placement="top" title="@Localization["orderView.TraddeNameTooltip"]">
                                                        <svg xmlns="http://www.w3.org/2000/svg" style="width:24px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="data-t">
                                                    <input class="font-20 RalewayRegular" type="text" @bind="ProductName2" />
                                                    @if (!CustomerAccepted && Status == "Desarrollo")
                                                    {
                                                        <button @onclick="SaveName" class="btn-t RalewayMedium font-20" type="button">
                                                            @Localization["orderView.Save"]
                                                        </button>
                                                    }
                                                    <div class="line-from d-none d-xl-block"></div>
                                                    @if (ProductName2 != "-")
                                                    {
                                                        <img src="/img/check-icon.svg" alt="check" class="d-none d-xl-block">
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row content-t justify-content-center">
                                        <div class="col-12 col-xl-10">
                                            <div class="content-t-pdb">
                                                <div class="head-t">
                                                    <h3 class="font-18 RalewayExtraBold">@ProductType</h3>
                                                </div>
                                                <div class="d-xl-flex gap-4 align-items-center w-100">
                                                    <div class="body-t body-t-bottle">
                                                        @foreach (var item in BottleInfo)
                                                        {
                                                            <div class="body-td">
                                                                <p class="font-18 RalewayRegular">@item.Label</p>
                                                                <div class="data-t">
                                                                    <span><p class="font-20 RalewayBold">@item.Value</p></span>
                                                                    @if (item.Value != "-")
                                                                    {
                                                                        <div class="line-from"></div>
                                                                        <img src="/img/check-icon.svg" alt="check">
                                                                    }
                                                                </div>
                                                            </div>
                                                        }
                                                    </div>

                                                    <div class="bottle-img">
                                                        @if (!string.IsNullOrEmpty(BottleImg))
                                                        {
                                                            <img alt="bottle" src="@BottleImg">
                                                        }
                                                        else
                                                        {
                                                            <p>-</p>
                                                        }
                                                    </div>

                                                    @if (Status == "Desarrollo")
                                                    {
                                                        <div class="d-flex d-xl-none btn-edit-bottle col-12 col-lg-2 content-t-button d-flex align-items-center w-100" style="height:180px;">
                                                            <button class="btn-t RalewayMedium font-20" type="button" data-bs-toggle="modal" data-bs-target="#sidebarRightModal3">
                                                                <img src="/img/pencil-icon.svg" alt="edit">@Localization["Edit"]
                                                            </button>
                                                        </div>
                                                    }
                                                </div>
                                            </div>

                                            <div>
                                                <div class="head-t">
                                                    <h3 class="font-18 RalewayExtraBold">@Localization["orderView.FillingInstructions"]</h3>
                                                </div>
                                                <div class="d-lg-flex gap-4 justify-content-center">
                                                    <div class="body-t body-t-filling body-t-bottle">
                                                        <!-- Batch -->
                                                        <div class="body-td">
                                                            <p class="font-18 RalewayRegular">@Localization["orderView.Batch"]</p>
                                                            <div class="data-t">
                                                                <select class="font-20 RalewayRegular form-select" @bind="FillingBatch" @bind:after="SaveBatch">
                                                                    @foreach (var opt in BatchFormats)
                                                                    {
                                                                        <option value="@opt.Format">@opt.Format</option>
                                                                    }
                                                                </select>
                                                                @if (FillingBatch?.StartsWith("OTHER") == true)
                                                                {
                                                                    <input type="text" class="font-20 RalewayRegular mt-2" maxlength="12" 
                                                                           @bind="FillingBatchOther" />
                                                                    <button class="btn-t RalewayMedium font-16 ml-2" type="button" 
                                                                            @onclick="SaveBatchOther" disabled="@IsSendingBatchOther">
                                                                        <span>@(IsSendingBatchOther ? "Enviando..." : "Enviar")</span>
                                                                    </button>
                                                                }
                                                                @if (FillingBatch != "-")
                                                                {
                                                                    <div class="line-from"></div>
                                                                    <img src="/img/check-icon.svg" alt="check">
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Exp Date -->
                                                        <div class="body-td">
                                                            <p class="font-18 RalewayRegular">@Localization["orderView.ExpDate"]</p>
                                                            <div class="data-t">
                                                                <select class="font-20 RalewayRegular form-select" @bind="FillingExpDate" @bind:after="SaveBbd">
                                                                    @foreach (var opt in BbdFormats)
                                                                    {
                                                                        <option value="@opt.Format">@opt.Format</option>
                                                                    }
                                                                </select>
                                                                @if (FillingExpDate == "OTHER")
                                                                {
                                                                    <input type="text" class="font-20 RalewayRegular mt-2" maxlength="12" 
                                                                           @bind="FillingExpDateOther" />
                                                                    <button class="btn-t RalewayMedium font-16 ml-2" type="button" 
                                                                            @onclick="SaveBbdOther" disabled="@IsSendingBbdOther">
                                                                        <span>@(IsSendingBbdOther ? "Enviando..." : "Enviar")</span>
                                                                    </button>
                                                                }
                                                                @if (FillingExpDate != "-")
                                                                {
                                                                    <div class="line-from"></div>
                                                                    <img src="/img/check-icon.svg" alt="check">
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Location -->
                                                        <div class="body-td">
                                                            <p class="font-18 RalewayRegular">@Localization["orderView.Location"]</p>
                                                            <div class="data-t">
                                                                <input type="text" readonly class="font-20 RalewayRegular" value="@FillingLocation">
                                                                @if (FillingLocation != "-")
                                                                {
                                                                    <div class="line-from"></div>
                                                                    <img src="/img/check-icon.svg" alt="check">
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="bottle-img-1">
                                                        <img src="/img/bottle-instructions.png" alt="instructions">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        @if (Status == "Desarrollo")
                                        {
                                            <div class="d-none d-xl-flex btn-edit-bottle col-12 col-lg-2 content-t-button align-items-end" style="height:180px;">
                                                <button class="btn-t RalewayMedium font-20" type="button" data-bs-toggle="modal" data-bs-target="#sidebarRightModal3">
                                                    <img src="/img/pencil-icon.svg" alt="edit">@Localization["Edit"]
                                                </button>
                                            </div>
                                        }
                                    </div>
                                </div>
                            }
                        </div>
                    }

                    <!-- 3. LABEL -->
                    @if (ProductType == "Bote")
                    {
                        <div class="toggle-from m-top-toggle">
                            <div class="flex-elm-from row">
                                <div class="left-from col-8 d-flex">
                                    <h2 class="RalewayBold font-24">@Localization["orderView.Label"]</h2>
                                    <div class="l-data-from d-flex">
                                        <div class="d-flex gap-1 check-from-label-2 ml-0 justify-content-center align-items-center">
                                            <input type="checkbox" @bind="NoLabel" @bind:after="OnNoLabelChanged" 
                                                   disabled="@(Status == "Cerrado cliente y calidad")" />
                                            <label class="RalewayBold font-18">@Localization["orderView.NoLabel"]</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="right-from col-4 d-flex gap-1">
                                    <div class="line-from"></div>
                                    <div class="@(PercentFilledLabel == 0 ? "progress-bar-from-0" : "progress-bar-from")">
                                        <p class="font-19 MuseoSemiBold">@FormatPercent(PercentFilledLabel)%</p>
                                    </div>
                                    <img @onclick="() => ToggleSection(3)" id="id-2" 
                                         class="arrow-t @(IsOpen[3] ? "arrow-t-r" : "")" 
                                         src="/img/arrow-close-down.svg" alt="arrow open">
                                </div>
                            </div>

                            @if (IsOpen[3])
                            {
                                <div id="container-toggle-3" class="container-toggle active">
                                    <div class="content-t">
                                        <div class="head-t">
                                            <h3 class="font-18 RalewayExtraBold">@Localization["orderView.GUMMYDNA"]</h3>
                                            @if (Status == "Desarrollo" && !NoLabel)
                                            {
                                                <button class="btn-t RalewayMedium font-20" type="button" data-bs-toggle="modal" data-bs-target="#sidebarRightModal2">
                                                    <img src="/img/pencil-icon.svg" alt="edit">@Localization["Edit"]
                                                </button>
                                            }
                                        </div>

                                        <div class="body-t body-nb-t @(NoLabel ? "disabled-section" : "")">
                                            @foreach (var item in LabelInfo)
                                            {
                                                <div class="body-td">
                                                    <p class="font-18 RalewayRegular @(NoLabel ? "disabled-text" : "")">@item.Label</p>
                                                    <div class="data-t">
                                                        <span><p class="font-20 RalewayBold @(NoLabel ? "disabled-text" : "")">@item.Value</p></span>
                                                        @if (item.Value != "-" && !NoLabel)
                                                        {
                                                            <div class="line-from"></div>
                                                            <img src="/img/check-icon.svg" alt="check">
                                                        }
                                                    </div>
                                                </div>
                                            }

                                            <div class="body-td">
                                                <p class="font-18 RalewayRegular">@Localization["orderView.Label"]</p>
                                                <div class="data-t">
                                                    @if (!string.IsNullOrEmpty(LabelImageUrl))
                                                    {
                                                        <img alt="label" class="w-100" src="@LabelImageUrl">
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }

                    <!-- 4. PALLETIZING -->
                    <div class="toggle-from m-top-toggle">
                        <div class="flex-elm-from row">
                            <div class="left-from col-8 d-flex">
                                <h2 class="RalewayBold font-24">@Localization["orderView.Palettizing"]</h2>
                            </div>
                            <div class="right-from col-4 d-flex gap-1">
                                <div class="line-from"></div>
                                <div class="@(PercentFilledPalettizing == 0 ? "progress-bar-from-0" : "progress-bar-from")">
                                    <p class="font-19 MuseoSemiBold">@FormatPercent(PercentFilledPalettizing)%</p>
                                </div>
                                <img @onclick="() => ToggleSection(4)" id="id-3" 
                                     class="arrow-t @(IsOpen[4] ? "arrow-t-r" : "")" 
                                     src="/img/arrow-close-down.svg" alt="arrow open">
                            </div>
                        </div>

                        @if (IsOpen[4])
                        {
                            <div id="container-toggle-4" class="container-toggle active">
                                <div class="content-t content-t-pdb">
                                    <div class="head-t">
                                        <h3 class="font-18 RalewayBold">@Localization["orderView.BOXLABEL"]</h3>
                                    </div>
                                    <div class="body-t">
                                        @foreach (var item in PalletInfo)
                                        {
                                            <div class="body-td">
                                                <p class="font-18 RalewayRegular">@item.Label</p>
                                                <div class="data-t">
                                                    <input class="RalewayRegular font-20" type="text" readonly value="@item.Value">
                                                    @if (item.Value != "-")
                                                    {
                                                        <div class="line-from"></div>
                                                        <img src="/img/check-icon.svg" alt="check">
                                                    }
                                                </div>
                                            </div>
                                        }

                                        <div class="body-td" id="body-td-pallet">
                                            <p class="font-18 RalewayRegular w-100">@Localization["orderView.BoxLabel"]</p>
                                            <div class="data-t">
                                                <div class="tags-pallet">
                                                    <div class="tag-flex">
                                                        <div class="tag-pallet-text">
                                                            <p class="RalewayRegular font-16">@Localization["orderView.Size"] A8</p>
                                                        </div>
                                                        <div class="tags-pallet-img">
                                                            @if (!string.IsNullOrEmpty(BoxLabelImg))
                                                            {
                                                                <img alt="tags" style="width:18.5rem;" src="@BoxLabelImg">
                                                            }
                                                            else
                                                            {
                                                                <p>-</p>
                                                            }
                                                        </div>
                                                    </div>
                                                    @if (Status == "Desarrollo")
                                                    {
                                                        <div>
                                                            <div class="btn-pallet-tag">
                                                                <button class="btn-t font-20 RalewayMedium" type="button" data-bs-toggle="modal" data-bs-target="#BoxLabelImagen">
                                                                    <img src="/img/pencil-icon.svg" alt="edit">@Localization["orderView.Personalize"]
                                                                </button>
                                                            </div>
                                                            <div class="desc-pallet d-flex justify-content-end text-end">
                                                                <p class="font-16 RalewayRegular">@Localization["orderView.PersonalizeText"]</p>
                                                            </div>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="content-t content-t-pdb">
                                    <div class="head-t">
                                        <h3 class="font-18 RalewayBold">@Localization["orderView.PALLETIZING"]</h3>
                                    </div>
                                    <div class="body-t">
                                        @foreach (var item in PalletizingInfo)
                                        {
                                            <div class="body-td">
                                                <p class="font-18 RalewayRegular">@item.Label</p>
                                                <div class="data-t">
                                                    <input class="font-20 RalewayRegular" type="text" readonly value="@item.Value">
                                                    @if (item.Value != "-")
                                                    {
                                                        <div class="line-from"></div>
                                                        <img src="/img/check-icon.svg" alt="check">
                                                    }
                                                </div>
                                            </div>
                                        }

                                        <div class="body-td" id="body-td-pallet">
                                            <p class="font-18 RalewayRegular">@Localization["orderView.PalletLabel"]</p>
                                            <div class="data-t">
                                                <div class="tags-pallet">
                                                    <div class="tag-flex">
                                                        <div class="tags-pallet-img">
                                                            @if (!string.IsNullOrEmpty(PalletLabelImg))
                                                            {
                                                                <img style="width:18.5rem;" alt="tags" src="@PalletLabelImg">
                                                            }
                                                            else
                                                            {
                                                                <p>-</p>
                                                            }
                                                        </div>
                                                    </div>
                                                    @if (Status == "Desarrollo")
                                                    {
                                                        <div>
                                                            <div class="btn-pallet-tag">
                                                                <button class="btn-t font-20 RalewayMedium" type="button" data-bs-toggle="modal" data-bs-target="#PalletLabelImagen">
                                                                    <img src="/iconbuttons/plus-icon.svg" alt="edit">@Localization["orderView.ExtraLabel"]
                                                                </button>
                                                            </div>
                                                            <div class="desc-pallet-1">
                                                                <p class="font-16 RalewayRegular">@Localization["orderView.ExtraLabelText"]</p>
                                                            </div>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="content-t">
                                    <div class="head-t d-flex justify-content-start gap-1 align-items-center">
                                        <h3 class="font-18 RalewayBold mb-0">@Localization["orderView.CommentsPale"]</h3>
                                        <div data-bs-toggle="tooltip" data-bs-placement="top" title="@Localization["orderView.CommentsPaleTooltip"]">
                                            <svg xmlns="http://www.w3.org/2000/svg" style="width:24px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="comments-area row gap-4">
                                        <textarea class="font-16 col-9" rows="10" @bind="PalletComments"></textarea>
                                        <div class="col-2">
                                            <button @onclick="SavePalletComments" class="btn-t font-20 RalewayMedium">
                                                @Localization["orderView.Send"]
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                    <!-- 5. OTHER REQUIREMENTS -->
                    <div class="toggle-from m-top-toggle">
                        <div class="flex-elm-from row">
                            <div class="left-from col-8 d-flex">
                                <h2 class="RalewayBold font-24">@Localization["orderView.OtherRequirements"]</h2>
                                <div class="l-data-from d-flex">
                                    <div class="d-flex gap-1 check-from-label-2 ml-0 justify-content-center align-items-center">
                                        <input type="checkbox" @bind="NoAnalytics" @bind:after="OnNoAnalyticsChanged" 
                                               disabled="@(Status == "Cerrado cliente y calidad")" />
                                        <label class="RalewayBold font-18">@Localization["orderView.NoAnalytics"]</label>
                                    </div>
                                </div>
                            </div>
                            <div class="right-from col-4 d-flex gap-1">
                                <div class="line-from"></div>
                                <div class="@(PercentFilledAnalytics == 0 ? "progress-bar-from-0" : "progress-bar-from")">
                                    <p class="font-19 MuseoSemiBold">@FormatPercent(PercentFilledAnalytics)%</p>
                                </div>
                                <img @onclick="() => ToggleSection(5)" id="id-4" 
                                     class="arrow-t @(IsOpen[5] ? "arrow-t-r" : "")" 
                                     src="/img/arrow-close-down.svg" alt="arrow open">
                            </div>
                        </div>

                        @if (IsOpen[5])
                        {
                            <div id="container-toggle-5" class="container-toggle active">
                                @if (!NoAnalytics)
                                {
                                    <div class="content-t-2" id="content-t-other">
                                        <div class="head-t">
                                            <h3 class="font-18 RalewayBold">@Localization["orderView.ANALYTICS"]</h3>
                                        </div>

                                        <div class="content-others">
                                            <div class="body-t w-full">
                                                <div class="table-responsive">
                                                    <table class="table table-borderless w-100">
                                                        <thead class="text-table-th">
                                                            <tr>
                                                                <th colspan="2" class="p-1">@Localization["orderView.Type"]</th>
                                                                <th class="p-1">@Localization["orderView.Quantity"]</th>
                                                                <th class="p-1">@Localization["orderView.Source"]</th>
                                                                <th class="p-1">@Localization["orderView.Analitycs"]</th>
                                                                <th class="p-1">@Localization["orderView.Periodicity"]</th>
                                                                <th class="p-1">@Localization["orderView.Observations"]</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var a in AnalyticsRows)
                                                            {
                                                                <tr class="text-table-td RalewayRegular">
                                                                    <td class="font-12" colspan="2">@a.Active</td>
                                                                    <td class="font-12">@a.Quantity</td>
                                                                    <td class="font-12">@a.Source</td>
                                                                    <td class="text-center font-12">
                                                                        <div class="check-from-label-2 ml-0 justify-content-center">
                                                                            <input type="checkbox" checked="@a.Analytics" disabled />
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control font-12" readonly value="@a.Periodicity" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control font-12" readonly value="@a.Observations" />
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>

                                                <div id="body-t-other">
                                                    <div class="line-f"></div>
                                                    <div class="body-td" id="body-td-other-2">
                                                        <p>@Localization["orderView.TOTALPRICE"]</p>
                                                        <div class="data-t" id="data-t-other">
                                                            <p class="font-20">@SumAnalytics€</p>
                                                        </div>
                                                    </div>
                                                    @if (SumAnalytics > 0)
                                                    {
                                                        <div class="text-f-other" id="body-td-other-f-1">
                                                            <p class="font-16 RalewayBold">@Localization["orderView.TOTALPRICETEXT"]</p>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="content-t-2" style="min-height:40px;display:flex;align-items:center;justify-content:center;">
                                        <span class="font-16 RalewayRegular">Sin analíticas</span>
                                    </div>
                                }
                            </div>
                        }
                    </div>

                    <!-- Confirm Button -->
                   
                    @if (CustomerAccepted && Prefix == "RG35")
                    {
                        <!-- Confirm Button -->
                        <div class="btn-atr-confirm d-flex justify-content-end">
                            <button data-bs-toggle="modal" data-bs-target="#confirmModal"
                                    class="@GetConfirmButtonClass() RalewayRegular font-20"
                                    disabled="@(!CanConfirmAndSign)">
                                @Localization["orderView.ConfirmProductAndSign"]
                            </button>
                        </div>
                    }
                }
            </div>
        </div>
    </section>

    <!-- Modales -->
    <ApproveModal CustomerAccepted="@CustomerAccepted" CodeRG35="@Code" TomarMuestra="@TakeSample" RG37="@RG37Code" />
    <UploadTagModal />
    <ConfirmModal OnConfirm="HandleConfirm" Status="@Status" CodeRG35="@Code" RG37="@RG37Code" PalletComments="@PalletComments" />
    <ThankYouModal />
    <PalletLabelImagenModal CodeRG35="@Code" OnUpdated="HandlePalletLabelUpdated" />
    <BoxLabelImagenModal CodeRG35="@Code" OnUpdated="HandleBoxLabelUpdated" />
    <ModalLabel OnLabelOptionsUpdated="HandleLabelOptionsUpdated" OnDraftLabelUpdated="HandleDraftLabelUpdated" />
    <BoteCapDataModal />
</div>
<style>
    /* Language Selector */
    .language-selector-products {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 200;
    }

    .language-button {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 50px;
        padding: 10px 24px;
        font-size: 14px;
        font-weight: 500;
        color: #495057;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 140px;
        justify-content: space-between;
    }

        .language-button:hover {
            background: #f8f9fa;
        }

    .language-dropdown {
        position: absolute;
        top: calc(100% + 8px);
        right: 0;
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        min-width: 150px;
        overflow: hidden;
    }

    .dropdown-item {
        display: block;
        width: 100%;
        padding: 10px 16px;
        background: none;
        border: none;
        text-align: left;
        color: #495057;
        font-size: 14px;
        cursor: pointer;
    }

        .dropdown-item:hover {
            background-color: #f8f9fa;
        }

    /* Back Button */
    .back-button-container {
        position: fixed;
        top: 15%;
        left: 270px;
        transform: translateY(-50%);
        z-index: 100;
    }

    .back-button {
        background: none;
        border: none;
        cursor: pointer;
        transition: transform 0.3s ease;
        padding: 0;
        display: block;
    }

        .back-button:hover {
            transform: scale(1.1);
        }

    /* Loading Overlay */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999999999;
    }

    .spinner {
        border: 5px solid rgba(0,0,0,.1);
        border-left-color: #09f;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    .steps-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0;
        margin: 1.44rem 0 0;
        width: 100%;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }
    .disabled {
        display: none;
        height: auto;
    }

    .active {
        display: block;
        height: auto;
    }

    p {
        font-size: 1.13em;
    }

    .header-order {
        /* background-color: var(--sectionSuperior); */
        padding: 0;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
        border: 1px dotted;
        display: grid;
        grid-template-columns: 70% 30%;
    }

    .download-t {
        position: absolute;
        z-index: 1;
        top: 40px;
        background-color: #f9f9fa;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        border-bottom: 1px solid #2f5496;
        border-left: 1px solid #2f5496;
        border-right: 1px solid #2f5496;
        width: 100%;
    }

        .download-t ul {
            list-style: none;
            padding: 1.65rem 1rem 1rem;
            margin-bottom: 0;
            font-weight: 700;
        }

    .hcol1 {
        padding: 2.85rem 2.64rem 1.3rem 2.64rem;
        border-right: dotted 1px;
    }

    .hcol2 {
        padding: 1.64rem 2.7rem;
    }

    .row1-1 {
        border-bottom: 1px dotted;
        align-items: flex-end;
    }

    .row3-1 {
        border-bottom: dotted 1px;
        padding-bottom: 0.57rem;
    }

    .row4-1 {
        margin: 1.44rem 0 0;
        height: 100%;
        max-height: 60px;
        display: grid;
        grid-template-columns: 23.63% 23.33% 23.33% 23.33%;
    }

        .row4-1 div > div > p {
            font-size: 0.88em;
            font-weight: 700;
            text-align: left;
            color: #9B9B9B;
            margin: 0 1rem;
        }

    .rowh1-2 {
        border-bottom: dotted 1px;
        padding: 0 0 0.43rem;
    }

    .rowh2-2 {
        margin: 1.44rem 0 0;
    }

    .rowh3-2 {
        border-bottom: dotted 1px;
        align-items: center;
        padding: 1.44rem 0;
    }

    .rowh4-2 {
        margin: 1.44rem 0 0;
    }

    .col1-rh1 img:nth-child(1) {
        margin-bottom: 1rem;
    }

    .country-rh1 p:nth-child(1) {
        text-align: right;
        color: #999A9B;
        margin-bottom: 0;
    }

    .col2-rh1 {
        align-items: center;
    }

        .col2-rh1 img {
            border-radius: 50%;
            width: 20px;
            height: 20px;
            margin: 1rem 0;
        }

        .colh2-r2 p,
        .col2-rh1 p {
            padding-left: 9px;
            margin: 1rem 0;
        }

    .colh1-r1 p {
        font-size: 1em;
        font-weight: 700;
        margin: 0;
    }

    .colh2-r1 span > p {
        font-size: 1.76em;
        text-align: right;
        margin: 0;
    }

    .col1-rh2 {
        /* gap: 6px; */
        margin-top: 1.57rem;
        color: var(--textButton);
        font-size: 1.32rem;
    }

        .col1-rh2 p:not(:last-child) {
            font-weight: 700;
        }

    .col2-rh3 p:nth-child(1) {
        font-size: 1.26em;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .col2-rh3 p:nth-child(2) {
        font-size: 1em;
    }

    .col3-rh3 span:nth-child(1) > p {
        font-size: 1.26em;
        font-weight: 700;
        text-align: right;
        margin-bottom: 0.5rem;
    }

    .col3-rh3 span:nth-child(2) > p {
        font-size: 1.26em;
        text-align: right;
    }

    .colh2-r2 p {
        font-size: 1.26em;
        font-weight: 700;
    }

    .colh3-r3 span > p {
        font-size: 1.26em;
        font-weight: 700;
    }

    .colh3-r3 span:nth-child(2) > p {
        color: #D91515;
        margin-top: 0.5rem;
    }

    .colh4-r3 span > p {
        color: #D91515;
        text-align: right;
        margin-bottom: 0.5rem;
    }

    .colh4-r3 img {
        display: block;
        margin-left: auto;
        margin-bottom: 0.5rem;
    }

    .colh1-r4 {
        position: relative;
    }

        .colh1-r4 button {
            border: solid 1px var(--textButton);
            border-radius: 10px;
            background: transparent;
            color: var(--textButton);
            font-size: 1.26em;
            line-height: 1.45rem;
            padding: 1rem;
            width: 100%;
            text-align: left;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

    /* Limita el ancho de la barra de fases y céntrala */
    .row.mt-3, .row4-1 {
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }

    /* Body content */
    h2 {
        font-size: 1.51em;
        font-weight: 700;
    }

    p {
        font-size: 1.26em;
        margin: 0;
    }

    .tag {
        width: 150px;
    }

    #header-gap-t {
        gap: 117px;
    }

    .paragraph-img-tags p {
        text-align: center;
        padding: 15px;
        font-size: 0.8em;
    }

    .img-icon-tags img {
        display: block;
        margin: auto;
        width: 100%;
        height: auto;
        max-width: 120px;
    }

    .paragraph-customize {
        text-align: right;
        font-size: 1.008em;
        color: var(--textNotFeatured);
        line-height: 1.3rem;
        margin-top: 1.19rem;
    }

    .arrow-t {
        rotate: 0deg;
    }

    .arrow-t-r {
        rotate: 180deg !important;
        filter: grayscale(0) !important;
    }

    .flex-gomi {
        display: flex;
        background-color: #F1F1F1;
        border-style: none;
        padding: 1.71rem 0.5rem;
        font-size: 1.26em;
        border-radius: 10px;
        height: 147px;
        width: 574px;
        justify-content: space-evenly;
    }

    .gomi-content {
        text-align: left;
        width: 70%;
    }

        .gomi-content h3 {
            font-size: 1.26em;
            font-weight: 700;
        }

    #important-gomi p {
        font-size: 1em;
        font-weight: 300;
        line-height: 1.3rem;
        color: var(--textNotFeatured);
    }

    .gomi-img {
        width: 105px;
        height: 95.45px;
    }

        .gomi-img img {
            width: 100%;
            height: 100%;
        }

    .flex-bottle {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .bottle-img {
        width: 213px;
        /* height: 274px; */
        padding: 1.89rem;
        background: #f2f2f2;
        border-radius: 10px;
    }

    .bottle-img-1 {
        width: 213px;
        /*height: 213px; */
        margin-right: auto;
        /* margin-left: 62px; */
    }

        .bottle-img img, .bottle-img-1 img {
            width: 100%;
            height: auto;
        }

    .body-t-bottle {
        width: 100%;
        max-width: 833px;
    }

        .body-t-bottle :nth-child(3) {
            border: none;
        }

    .body-t-filling :nth-child(3) {
        border: none;
    }

    .body-nb-t :nth-child(4) {
        border: none;
    }

    #body-td-gommy {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    #body-td-pallet {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        border: none;
        padding-right: 7rem;
    }

    .btn-pallet-tag button {
        margin-left: auto;
        margin-top: 2.52rem;
    }

    .tag-flex {
        display: flex;
        gap: 23px;
        justify-content: flex-end;
    }

    .tag-pallet-text, .desc-pallet, .desc-pallet-1 {
        font-size: 1em;
        color: var(--textNotFeatured);
    }

    .desc-pallet {
        margin-top: 1.07rem;
        /* line-height: 1.3rem; */
    }

    .desc-pallet-1 {
        margin-top: 1.07rem;
        /* line-height: 1.3rem; */
        text-align: right;
    }

    .arrow-other img {
        cursor: pointer;
        filter: grayscale(1);
        rotate: -90deg;
    }

    .body-t {
        width: 100%;
    }

    #body-t-other {
        width: 77.77%;
    }

    #body-td-other {
        display: flex;
        justify-content: flex-start;
        gap: 25px;
        border: none;
        padding: 0 0 1rem;
        padding-right: 1rem;
    }

    #body-td-other-head {
        display: flex;
        justify-content: flex-start;
        align-items: flex-end;
        gap: 20px;
        border: none;
        padding: 0 0 1rem;
        margin-bottom: 1.583rem;
    }

        #body-td-other-head > .frecuency-text {
            font-size: 1.260em;
        }

    .line-h {
        width: 64.688%;
        height: 0;
        border-bottom: dotted 1px;
    }

    .line-f {
        width: 100%;
        height: 0;
        border-bottom: dotted 1px;
    }

    #body-td-other-1 {
        margin: 4.040rem 0 1.517rem;
        width: 100%;
        padding: 0 15.5rem 0.31rem 0;
        border: none;
    }

        #body-td-other-1 p {
            color: var(--textNotFeatured);
            font-size: 1rem;
            font-weight: 300;
            margin-left: 2.89rem;
        }

    #body-td-other-f-1 {
        margin: 0.446rem 0 1.517rem;
        width: 100%;
        padding: 0 15.5rem 0.31rem 0;
        border: none;
    }

        #body-td-other-f-1 p {
            color: var(--textNotFeatured);
            font-size: 1rem;
            font-weight: 300;
            margin-left: 2.89rem;
        }

    #body-td-other-2 {
        margin: 1.638rem 0 0;
        width: 100%;
        padding: 0 14.3rem 0.31rem 0;
        border: none;
    }

        #body-td-other-2 p {
            font-size: 1rem;
            font-weight: 700;
            margin-left: 2.89rem;
        }

        #body-td-other-2 > div > p {
            font-size: 1.260em;
            font-weight: 300;
        }

    #data-t-other {
        display: flex;
        gap: 39px;
        margin-left: auto;
    }

    #data-t-other-head {
        text-align: center;
        display: flex;
        gap: 28px;
        margin-left: auto;
    }

        #data-t-other-head p:nth-child(2) {
            display: none;
        }

        #data-t-other-head p {
            font-size: 1rem;
        }

    #data-t-other-0 {
        margin-right: auto;
        margin-left: 240px;
    }

    #data-t-other-1 {
        margin-left: auto;
    }

    #data-t-other-2 {
        margin-right: auto;
        margin-left: 293px;
    }

    #data-t-other-3 {
        margin-right: auto;
        margin-left: 190px;
    }

    #content-t-other {
        padding-top: 2rem;
    }

    .content-toggle-other {
        padding: 10px 68px;
        padding-right: 0;
    }

    #t-other-content {
        padding: 10px 135px 10px 110px;
    }

    .tb-other-content {
        margin-left: 20px;
        background-color: #f2f2f2;
        border-radius: 10px;
        width: 400px;
    }

    #th-other {
        padding: 9px 14px;
        width: 250px;
        font-size: 1.5em;
        font-weight: 300;
        border-bottom: dotted 1px;
    }

    .content-others {
        border: solid 1px var(--icon);
        border-radius: 15px;
        padding: 2.646rem;
        width: 95%;
    }

    tbody > tr:nth-child(4) > #th-other {
        border: none;
    }

    tbody > tr:nth-child(4) > #td-other {
        border-bottom: none;
    }

    #td-other {
        padding: 9px 14px;
        width: 150px;
        font-size: 1.5em;
        border-left: dotted 1px;
        border-bottom: dotted 1px;
    }

    .content-t input[type="number"] {
        background-color: #F1F1F1;
        border-style: none;
        padding: 0 1.44rem;
        font-size: 1.26em;
        border-radius: 10px;
        height: 44px;
        width: 300px;
    }




    .m-top-toggle {
        margin-top: 2.394rem;
    }

    .col-b {
        padding: 3.52rem 0;
    }

    .flex-elm-from {
        padding: 0.92rem 2.64rem;
        justify-content: space-between;
    }

    .toggle-from {
        border: solid 1px #D2D2D2;
        border-radius: 50px;
    }

    .left-from {
        align-items: center;
        padding: 0 !important;
    }

    .l-data-from img {
        width: 26.22px;
        height: 32px;
    }

    .l-data-from {
        gap: 10px;
        margin-left: 2.89rem;
        align-items: center;
    }

        .l-data-from span > p {
            font-weight: 700;
        }

    .right-from div:nth-child(1) img {
        width: 19.5px;
        height: 20px;
    }

    .comment-from {
        justify-content: flex-end;
        gap: 10px;
        color: #989797;
    }

        .comment-from p {
            text-decoration: underline;
            font-size: 1.5em;
        }

    textarea {
        min-height: 128px;
        max-height: 128px;
        padding: 0.5rem;
        border-color: var(--icon);
        border-radius: 10px;
    }

        textarea:focus-visible {
            border-color: var(--icon);
            outline: 0;
        }

    .right-from img {
        width: 40px;
        height: 40px;
        rotate: 0deg;
        margin-left: auto;
        cursor: pointer;
    }

    .right-from {
        align-items: center;
        padding: 0 !important;
    }

    .progress-bar-from {
        color: #fff;
        font-weight: 700;
        border: solid 1px #0ED88F;
        background-color: #0ED88F;
        border-radius: 30px;
        line-height: 1rem;
        padding: 0.50rem 2.56rem;
        margin: auto 0 auto auto;
        text-align: center;
    }

    .progress-bar-from-0 {
        color: #fff;
        font-weight: 700;
        border: solid 1px #F2F2F2;
        background-color: #F2F2F2;
        border-radius: 30px;
        line-height: 1rem;
        padding: 0.50rem 2.56rem;
        margin: auto 0 auto auto;
        text-align: center;
    }

    .line-from {
        width: 0;
        height: 49px;
        border-left: dotted 1px;
        margin: auto;
    }

    #line-from-gommy {
        height: 140px;
    }

    .check-from-label p {
        font-weight: 700;
        font-size: 1.13em;
    }

    .check-from-label input[type="checkbox"] {
        width: 28px !important;
        height: 28px;
        appearance: none;
        border: 1px solid var(--icon);
        border-radius: 5px;
    }

        .check-from-label input[type="checkbox"]:checked {
            background-image: url("/public/img/check-icon-others.svg");
            background-repeat: no-repeat;
            background-size: 28px;
            border: none;
        }

    .check-from-label input:nth-child(2) {
        display: none;
    }

    .check-from-label {
        display: flex;
        margin-left: 3.52rem;
        gap: 3.84rem;
    }

    .check-from-label-2 {
    }


        .check-from-label-2 p {
            font-weight: 700;
            font-size: 1.13em;
        }

        .check-from-label-2 input[type="checkbox"] {
            width: 28px;
            height: 28px;
            appearance: none;
            border: 1px solid var(--icon);
            border-radius: 5px;
        }

            .check-from-label-2 input[type="checkbox"]:checked {
                background-image: url("/public/img/check-icon-others.svg");
                background-repeat: no-repeat;
                background-size: 28px;
                border: none;
            }

        .check-from-label-2 input:nth-child(2) {
            display: none;
        }

    .btn-atr {
        padding: 3.96rem 6.93rem;
    }

    .btn-atr-confirm {
        padding: 3.96rem 0 0;
    }

    button.btn-save-atr {
        display: block;
        border: solid 1px var(--textButton);
        border-radius: 30px;
        background-color: var(--textButton);
        line-height: 1rem;
        font-size: 1.44em;
        padding: 1.44rem 1.57rem;
        color: #fff;
        margin: 0 0 0 auto;
        transition: all 0.3s ease;
    }

        button.btn-save-atr:hover {
            transition: all 0.3s ease;
            background-color: transparent;
            color: var(--textButton);
        }

    button.btn-save-confirm {
        display: block;
        border: solid 1px var(--icon);
        border-radius: 30px;
        line-height: 1rem;
        font-size: 1.44em;
        padding: 1.44rem 1.57rem;
        margin: 0 0 0 auto;
        transition: all 0.3s ease;
        background-color: var(--textButton);
        color: white;
    }

    button.btn-save-confirm-firm {
        display: block;
        border: solid 1px var(--icon);
        border-radius: 30px;
        line-height: 1rem;
        font-size: 1.44em;
        padding: 1.44rem 1.57rem;
        margin: 0 0 0 auto;
        transition: all 0.3s ease;
        background-color: transparent;
        color: #F2F2F2;
    }

    button.btn-save-confirm-firm {
        display: block;
        border: solid 1px var(--icon);
        border-radius: 30px;
        line-height: 1rem;
        font-size: 1.44em;
        padding: 1.44rem 1.57rem;
        margin: 0 0 0 auto;
        transition: all 0.3s ease;
        background-color: transparent;
        color: #F2F2F2;
    }

        button.btn-save-confirm-firm:hover {
            transition: all 0.3s ease;
            background-color: transparent;
            color: #F2F2F2;
        }

    /*content 1*/

    .border-none-t {
        border-style: none !important;
    }

    .body-t-flex {
        display: flex;
        /* gap: 3rem; */
        margin-top: 40px;
        width: 100%;
        /* overflow-x: auto; */
    }

    /* .gap-t {
        gap: 2.35rem;
    } */

    /* .body-data p:nth-child(1) {
        font-weight: 700;
        font-size: 0.88rem;
        color: #929292;
        margin-bottom: 1.57rem;
    }

    .body-data span p:only-child {
        font-weight: 700;
        font-size: 1.13rem;
        color: #000;
        text-align: center;
        margin-top: 0.63rem;
    }

    .body-data img {
        margin: 2.83rem auto auto;
        cursor: pointer;
    } */

    .body-t-flex {
        display: flex;
        justify-content: space-between; /* Espacio entre columnas */
        align-items: center; /* Centra verticalmente */
        gap: 1rem; /* Espacio entre columnas, ajusta según tus clases gap-... */
        padding: 0.5rem 0;
    }



    .body-data {
        flex: 1 1 0; /* Todas las columnas ocupan el mismo ancho */
        /* text-align: center;  */ /* Centra el texto y los inputs */
        padding: 0 0.5rem; /* Espaciado horizontal */
    }

        .body-data input {
            width: 100%;
            padding: 0.25rem 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: #fafafa;
        }

            .body-data input[type="checkbox"] {
                appearance: none;
                background-color: #F1F1F1;
                width: 28px;
                height: 28px;
                border-style: none;
                border-radius: 5px;
            }

    #input-bt-width {
        width: 252px
    }

    /* #input-bt-width-390 {
        width: 390px;
    } */

    #input-bt-width-240 {
        width: 240px;
    }

    #input-bt-width-65 {
        width: 70px;
        padding: 0 10px;
    }

    /* .content-t div:nth-child(1)>p {
        font-size: 1.3em;
    } */

    .content-td p > span {
        font-weight: 700;
    }

    .content-t-pdb {
        padding-bottom: 0 !important;
        width: 100%;
        overflow-x: auto;
    }

    .content-toggle-header {
        background-color: #F8F7F9;
        padding: 1.8rem 1.2rem;
    }

    .content-td-flex {
        display: flex;
        align-items: center;
        gap: 1rem;
        font-size: 1.13rem;
        margin-top: 2.83rem;
    }

    .header-content-t {
        width: 100%;
        justify-content: center;
        align-items: center;
        gap: 25px;
    }

    .content-t input[type="text"] {
        background-color: #F1F1F1;
        border-style: none;
        padding: 0 1.44rem;
        font-size: 1.26em;
        border-radius: 10px;
        height: 44px;
        /* width: 20.625rem; */
        /* max-width: 500px; */
    }

    .selectNew {
        background-color: #F1F1F1;
        border-style: none;
        padding: 0 1.44rem;
        font-size: 1.26em;
        border-radius: 10px;
        height: 44px;
    }

    .content-t input[type="text"]:focus-visible {
        outline: 0;
    }

    /*switch*/
    .slider {
        background-color: #C7C7CC;
        border-radius: 100px;
        padding: 1px;
        margin: 10px;
        cursor: pointer;
        transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1) 0s;
        align-items: center;
        position: relative;
        display: block;
        width: 40px;
        height: 20px;
        box-shadow: #C7C7CC 0px 0px 5px inset, #C7C7CC 0px 0px 0px 24px inset, #0ED88F 0px 0px 0px 0px inset, rgba(224, 224, 224, 0.45) 0px 1px 0px 0px;
    }

        .slider::after {
            content: "";
            display: flex;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background-color: #fff;
            border-radius: 200px;
            position: absolute;
            transition: left 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s, background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s;
            will-change: left, background-color;
        }

    .switch {
        display: block;
        margin-top: 0;
    }

        .switch input[type="checkbox"]:checked + .slider {
            box-shadow: #0ED88F 0px 0px 0px 2px inset, #0ED88F 0px 0px 0px 24px inset, rgba(224, 224, 224, 0.45) 0px 1px 0px 0px;
        }

            .switch input[type="checkbox"]:checked + .slider::after {
                left: 24px;
            }

        .switch input[type="checkbox"] {
            display: none;
        }

    /*end content 1*/
    /*content 2 */
    .content-t p, h3 {
        font-size: 1.125rem;
    }

    h3 {
        font-weight: 900;
    }

    .content-t {
        padding: 3.96rem 6.93rem;
    }

    .content-t-2 {
        padding: 3.96rem 6.93rem;
    }

    .head-t {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.69rem;
    }

    .data-t {
        display: flex;
        gap: 2.39rem;
        align-items: center;
    }

    .body-td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.4rem 0;
        border-bottom: dotted 1px;
    }

    #btd-1 {
        border-top: dotted 1px;
    }

    .body-td span > p {
        font-size: 1.26em;
        font-weight: 700;
    }

    .btn-t img {
        width: 14.88px;
        height: 15px;
        margin-right: 0.44rem;
    }

    button.btn-t {
        display: flex;
        border-style: none;
        line-height: 1rem;
        padding: 0.88rem;
        border-radius: 10px;
        font-size: 1.26rem;
        color: var(--textButton);
        align-items: center;
        transition: all 0.3s ease;
    }

        button.btn-t:hover {
            transition: all 0.3s ease;
            background-color: var(--textButton);
            color: white;
        }

            button.btn-t:hover img {
                filter: brightness(0) invert(100%);
            }

    /*end content 2 */


    .text-table-th {
        color: #999A9B;
        font-size: 1rem;
        font-weight: 400;
    }

        .text-table-th th {
            font-weight: 400 !important;
        }

    .text-table-td td {
        font-size: 1.25rem;
        font-weight: 300;
    }

    /* #recipe-1 {
        width: 100%;
        overflow-x: auto;
    } */




    .container-toggle {
        max-height: 0; /* Inicialmente oculto */
        overflow: hidden;
        transition: max-height 0.8s ease; /* Ajusta la duración y el tipo de easing */
    }

        .container-toggle.active {
            display: block;
            max-height: 2000px;
            overflow: hidden;
            transition: max-height 0.8s ease;
        }

    .disabled {
        display: none;
        height: auto;
    }

    .active {
        display: block;
        height: auto;
    }

    #bt-3 {
        border-bottom: none !important;
    }

    /* Ajuste de padding para fondo gris en tablet y mobile */
    @@media (max-width: 1024px) {
        .content-toggle-header

    {
        padding: 1.2rem 0.5rem;
    }

    .header-content-t {
        gap: 8px !important;
        flex-wrap: wrap;
    }

    .content-t,
    .content-t-2 {
        padding: 1.2rem 0.5rem !important;
    }

    }

    .features-row {
        display: flex;
        justify-content: space-between;
        gap: 0.5rem;
        flex-wrap: nowrap;
        margin-bottom: 1rem;
        align-items: stretch;
        overflow-x: unset;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }

    .feature {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1 1 0;
        min-width: 80px;
        justify-content: space-between;
        height: 160px;
        margin-bottom: 0;
    }
    @@media (max-width: 1200px) {
        .features-row

    {
        gap: 1rem;
    }

    }
    @@media (max-width: 1024px) {
        .features-row

    {
        gap: 0.5rem;
        flex-wrap: nowrap;
        overflow-x: auto;
    }

    .feature {
        min-width: 90px;
        height: 140px;
    }

    }
</style>
@code{
    private string currentLanguage = "es";

}